@page "/setup-method-select"
@inject NavigationManager Navigation
@inject IJSRuntime JSRuntime

<div class="splash-overlay" id="splashOverlay">
    <div class="splash-content">
        <h1 class="splash-title">NextUI Setup Wizard</h1>
    </div>
</div>

<div class="method-container">
    <h3 data-ref="page-header">Choose Setup Method</h3>
    <p class="intro-text">Select how you would like to transfer BIOS and ROM files to your emulation device:</p>

    <div class="methods-grid">
        <!-- SD Card Method -->
        <div class="method-card" @onclick="NavigateToSdCardMode">
            <div class="method-icon">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="2" y="4" width="20" height="16" rx="2"/>
                    <path d="M7 4V2"/>
                    <path d="M17 4V2"/>
                    <path d="M2 8h20"/>
                    <path d="M7 12h3"/>
                    <path d="M14 12h3"/>
                </svg>
            </div>

            <div class="method-content">
                <h4>SD Card Mode</h4>
                <p class="method-description">Remove the SD card from your device and connect it to your computer. Files are copied directly to the SD card.</p>

                <div class="method-features">
                    <div class="feature">✅ Fast transfer speeds</div>
                    <div class="feature">✅ Works with all devices</div>
                    <div class="feature">✅ No additional setup required</div>
                </div>

                <div class="method-requirements">
                    <strong>Requirements:</strong>
                    <ul>
                        <li>SD card reader on computer</li>
                        <li>Remove SD card from device</li>
                    </ul>
                </div>
            </div>

            <div class="method-footer">
                <button class="btn btn-primary">Use SD Card</button>
            </div>
        </div>

        <!-- ADB Method -->
        <div class="method-card" @onclick="NavigateToAdbMode">
            <div class="method-icon adb">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect x="2" y="6" width="20" height="8" rx="1"/>
                    <path d="M6 15.5v.01"/>
                    <path d="M12 15.5v.01"/>
                    <path d="M18 15.5v.01"/>
                    <path d="M6 8.5v.01"/>
                    <path d="M12 8.5v.01"/>
                    <path d="M18 8.5v.01"/>
                    <path d="M12 2v4"/>
                    <path d="M8 18h8"/>
                    <path d="M8 22h8"/>
                </svg>
            </div>

            <div class="method-content">
                <h4>ADB Mode</h4>
                <p class="method-description">Connect your device directly to your computer via USB. Files are transferred using Android Debug Bridge (ADB).</p>

                <div class="method-features">
                    <div class="feature">✅ No need to remove SD card</div>
                    <div class="feature">✅ Keep device connected</div>
                    <div class="feature">✅ Advanced user option</div>
                </div>

                <div class="method-requirements">
                    <strong>Requirements:</strong>
                    <ul>
                        <li>NextUI already installed on device</li>
                        <li>USB cable connection</li>
                        <li>Enable Developer Options on device</li>
                        <li>Android Platform Tools</li>
                    </ul>
                </div>
            </div>

            <div class="method-footer">
                <button class="btn btn-outline">Use ADB</button>
            </div>
        </div>
    </div>

    <div class="help-section">
        <h5>Need Help Deciding?</h5>
        <div class="help-content">
            <div class="help-item">
                <strong>Choose SD Card Mode if:</strong>
                <ul>
                    <li>You want the simplest setup process</li>
                    <li>You don't mind removing the SD card from your device</li>
                    <li>You want the fastest transfer speeds</li>
                </ul>
            </div>

            <div class="help-item">
                <strong>Choose ADB Mode if:</strong>
                <ul>
                    <li>NextUI is already installed on your device</li>
                    <li>You prefer to keep your device connected</li>
                    <li>You're comfortable with developer tools</li>
                    <li>You don't want to handle the SD card directly</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<style>
    .splash-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        opacity: 1;
        transition: opacity 0.5s ease-out;
    }

    .splash-overlay.fade-out {
        opacity: 0;
        pointer-events: none;
    }

    .splash-content {
        text-align: center;
        color: white;
    }

    .splash-title {
        font-size: 3em;
        font-weight: 300;
        margin: 0;
        text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }

    .method-container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 20px;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    .intro-text {
        color: #586069;
        margin-bottom: 30px;
        font-size: 1.1em;
        text-align: center;
    }

    .methods-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        margin-bottom: 40px;
    }

    .method-card {
        background: #ffffff;
        border: 2px solid #e1e4e8;
        border-radius: 12px;
        padding: 24px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        flex-direction: column;
        height: 100%;
    }

    .method-card:hover {
        border-color: #0366d6;
        box-shadow: 0 8px 25px rgba(3, 102, 214, 0.15);
        transform: translateY(-2px);
    }

    .method-icon {
        text-align: center;
        margin-bottom: 20px;
        color: #0366d6;
    }

    .method-icon.adb {
        color: #28a745;
    }

    .method-content {
        flex: 1;
    }

    .method-content h4 {
        margin: 0 0 12px 0;
        color: #24292e;
        font-size: 1.4em;
        text-align: center;
    }

    .method-description {
        color: #586069;
        line-height: 1.6;
        margin-bottom: 20px;
        text-align: center;
    }

    .method-features {
        margin-bottom: 20px;
    }

    .feature {
        display: flex;
        align-items: center;
        margin-bottom: 8px;
        color: #28a745;
        font-size: 0.9em;
    }

    .method-requirements {
        background: #f6f8fa;
        border: 1px solid #e1e4e8;
        border-radius: 6px;
        padding: 12px;
        margin-bottom: 20px;
    }

    .method-requirements strong {
        color: #24292e;
        display: block;
        margin-bottom: 8px;
    }

    .method-requirements ul {
        margin: 0;
        padding-left: 16px;
        color: #586069;
    }

    .method-requirements li {
        margin-bottom: 4px;
        font-size: 0.9em;
    }

    .method-footer {
        text-align: center;
        padding-top: 12px;
        border-top: 1px solid #e1e4e8;
    }

    .btn {
        padding: 12px 24px;
        border: 2px solid #d0d7de;
        border-radius: 8px;
        background: #f6f8fa;
        color: #24292e;
        text-decoration: none;
        cursor: pointer;
        font-size: 14px;
        font-weight: 600;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s;
        white-space: nowrap;
        min-width: 140px;
    }

    .btn:hover {
        background: #f3f4f6;
        border-color: #d0d7de;
    }

    .btn-primary {
        background: #0366d6;
        color: white;
        border-color: #0366d6;
    }

    .btn-primary:hover {
        background: #0256cc;
        border-color: #0256cc;
    }

    .btn-outline {
        background: transparent;
        color: #28a745;
        border-color: #28a745;
    }

    .btn-outline:hover {
        background: #28a745;
        color: white;
    }

    .help-section {
        background: #f8f9fa;
        border: 1px solid #e1e4e8;
        border-radius: 8px;
        padding: 24px;
        margin-top: 30px;
    }

    .help-section h5 {
        margin: 0 0 16px 0;
        color: #24292e;
        text-align: center;
    }

    .help-content {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
    }

    .help-item {
        background: white;
        border: 1px solid #e1e4e8;
        border-radius: 6px;
        padding: 16px;
    }

    .help-item strong {
        color: #24292e;
        display: block;
        margin-bottom: 8px;
    }

    .help-item ul {
        margin: 0;
        padding-left: 16px;
        color: #586069;
    }

    .help-item li {
        margin-bottom: 4px;
        font-size: 0.9em;
    }

    @@media (max-width: 768px) {
        .methods-grid {
            grid-template-columns: 1fr;
            gap: 20px;
        }

        .help-content {
            grid-template-columns: 1fr;
            gap: 16px;
        }

        .method-container {
            padding: 15px;
        }
    }
</style>

@code {
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            // Show splash screen for 2 seconds
            await Task.Delay(2000);
            await JSRuntime.InvokeVoidAsync("eval", @"
                const splash = document.getElementById('splashOverlay');
                if (splash) {
                    splash.classList.add('fade-out');
                    setTimeout(() => splash.style.display = 'none', 500);
                }
            ");

            // Scroll to page header
            await Task.Delay(600);
            await JSRuntime.InvokeVoidAsync("eval", "document.querySelector('[data-ref=\"page-header\"]').scrollIntoView({behavior: 'auto', block: 'start'});");
        }
    }

    private void NavigateToSdCardMode()
    {
        Navigation.NavigateTo("/sd-card-prep");
    }

    private void NavigateToAdbMode()
    {
        Navigation.NavigateTo("/adb-config");
    }
}